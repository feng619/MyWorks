<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Examples</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
<style type="text/css">
	.content{
		width: 700px;
		font-size: 0;
	}
	.head, .box{
		width: 100px;
		height: 100px;
		display: inline-block;
		vertical-align: middle;
		font-size: 16px;
		outline: 1px solid #ccc;
		line-height: 100px;
		text-align: center;
	}
</style>
</head>
<body>
	<div class="menu">
		<select id="SelectY" onchange="the_year()">
		  <option value="2016">2016
		  <option value="2015">2015
		  <option value="2014">2014
		  <option value="2013">2013
		  <option value="2012">2012
		  <option value="2011">2011
		  <option value="2010">2010
		</select>

		<select id="SelectM" onchange="the_Month()">
		  <option value="1">1
		  <option value="2">2
		  <option value="3">3
		  <option value="4">4
		  <option value="5">5
		  <option value="6">6
		  <option value="7">7
		  <option value="8">8
		  <option value="9">9
		  <option value="10">10
		  <option value="11">11
		  <option value="12">12
		</select>
		<button onclick="show();">送出</button>
	</div>
	<div class="content">
		<div class="head">日</div>
		<div class="head">一</div>
		<div class="head">二</div>
		<div class="head">三</div>
		<div class="head">四</div>
		<div class="head">五</div>
		<div class="head">六</div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
		<div class="box"></div>
	</div>
    
    <script>
    	var time = new Date();
    	var y=2016;
    	var m=1;
		var feb;

    	function the_year() {
		    y = Number(document.getElementById("SelectY").value);
		}

    	function the_Month() {
		    m = Number(document.getElementById("SelectM").value);
		}


		function show(){
			// 該年月的第一天是星期幾? d_1
			time.setFullYear(y);
			time.setMonth(m-1);
			time.setDate(1);
	    	var d_1 = time.getDay();

	    	//決定這一年的 2 月有幾天
	    	if(y%400===0){
	    		feb=29;
	    	}else if(y%100===0){
	    		feb=28;
	    	}else if(y%4===0){
	    		feb=29;
	    	}else{
	    		feb=28;
	    	}
	    	//決定這個月有幾(j)天
	    	var arr=[31,feb,31,30,31,30,31,31,30,31,30,31];
	    	var j=arr[m-1];

	    	//先移除所有方塊
	  //   	var content = document.getElementsByClassName('content');
	  //   	var boxs = document.getElementsByClassName('box');
	  //   	var index = content[0].childNodes.length-1;
	  //   	for(let i=index; i>14; i-=2){ // 每次都扣除 div 和裡面的 text
			// 	content[0].removeChild(content[0].childNodes[i]);
			// 	content[0].removeChild(content[0].childNodes[i-1]);
			// }

			//去除不明的小闌尾 .box 有時候會刪不乾淨??
			// boxs = document.getElementsByClassName('box');
			// if(boxs.length==1){
			// 	index = content[0].childNodes.length-1;	
			// 	content[0].removeChild(content[0].childNodes[index]);
				// content[0].removeChild(content[0].childNodes[index-1]);
			// }
			
	    	//先移除所有方塊
	    	var content = document.getElementsByClassName('content');
	    	var boxs = document.getElementsByClassName('box');
	    	while(boxs.length>0){
	    		boxs[0].parentNode.removeChild(boxs[0]);
	    	}

	    	//根據 d_1 + j 決定要多少方塊
	    	var rows = Math.ceil((d_1 + j)/7);


	    	// console.log(document.getElementsByClassName('head').length);
	    	// console.log(document.getElementsByClassName('box').length);
	    	//製作方塊
			for(let i=0; i<(7*rows); i++){
	    		let morediv = document.createElement('div');
				morediv.className = 'box';
				content[0].appendChild(morediv);
			}

	    	boxs = document.getElementsByClassName('box');
	    	
	    	for(let i=0; i<boxs.length; i++){
	    		if(i < d_1){
	    			boxs[i].innerHTML = '';
	    		}else if(i >= d_1){
	    			boxs[i].innerHTML = (i+1-d_1) <= j ?  (i+1-d_1) :'';
	    		}    		
	    	}			
		}



    </script>
</body>
</html>